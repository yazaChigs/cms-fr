!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/forms"),require("@angular/cdk/keycodes"),require("@angular/cdk/scrolling"),require("rxjs"),require("rxjs/operators"),require("@angular/core"),require("@angular/material"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-mat-select-search",["exports","@angular/forms","@angular/cdk/keycodes","@angular/cdk/scrolling","rxjs","rxjs/operators","@angular/core","@angular/material","@angular/common"],t):t(e["ngx-mat-select-search"]={},e.ng.forms,e.ng.cdk.keycodes,e.ng.cdk.scrolling,e.rxjs,e.rxjs.operators,e.ng.core,e.ng.material,e.ng.common)}(this,function(e,t,n,a,i,o,s,l,r){"use strict";var c=function(){function e(){}return e.decorators=[{type:s.Directive,args:[{selector:"[ngxMatSelectSearchClear]"}]}],e}(),p=function(){function e(e,t,n,a){void 0===a&&(a=null),this.matSelect=e,this.changeDetectorRef=t,this._viewportRuler=n,this.matOption=a,this.placeholderLabel="Suche",this.type="text",this.noEntriesFoundLabel="Keine Optionen gefunden",this.clearSearchInput=!0,this.searching=!1,this.disableInitialFocus=!1,this.preventHomeEndKeyPropagation=!1,this.disableScrollToActiveOnOptionsChanged=!1,this.ariaLabel="dropdown search",this.onChange=function(e){},this.onTouched=function(e){},this.overlayClassSet=!1,this.change=new s.EventEmitter,this._onDestroy=new i.Subject}return Object.defineProperty(e.prototype,"isInsideMatOption",{get:function(){return!!this.matOption},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var t=this,e="mat-select-search-panel";this.matSelect.panelClass?Array.isArray(this.matSelect.panelClass)?this.matSelect.panelClass.push(e):"string"==typeof this.matSelect.panelClass?this.matSelect.panelClass=[this.matSelect.panelClass,e]:"object"==typeof this.matSelect.panelClass&&(this.matSelect.panelClass[e]=!0):this.matSelect.panelClass=e,this.matOption&&(this.matOption.disabled=!0,this.matOption._getHostElement().classList.add("contains-mat-select-search")),this.matSelect.openedChange.pipe(o.delay(1),o.takeUntil(this._onDestroy)).subscribe(function(e){e?(t.updateInputWidth(),t.disableInitialFocus||t._focus()):t.clearSearchInput&&t._reset()}),this.matSelect.openedChange.pipe(o.take(1)).pipe(o.takeUntil(this._onDestroy)).subscribe(function(){t.matSelect._keyManager?t.matSelect._keyManager.change.pipe(o.takeUntil(t._onDestroy)).subscribe(function(){return t.adjustScrollTopToFitActiveOptionIntoView()}):console.log("_keyManager was not initialized."),t._options=t.matSelect.options,t._options.changes.pipe(o.takeUntil(t._onDestroy)).subscribe(function(){var e=t.matSelect._keyManager;e&&t.matSelect.panelOpen&&setTimeout(function(){e.setFirstItemActive(),t.updateInputWidth(),t.matOption&&(t._noEntriesFound()?t.matOption._getHostElement().classList.add("mat-select-search-no-entries-found"):t.matOption._getHostElement().classList.remove("mat-select-search-no-entries-found")),t.disableScrollToActiveOnOptionsChanged||t.adjustScrollTopToFitActiveOptionIntoView()},1)})}),this.change.pipe(o.takeUntil(this._onDestroy)).subscribe(function(){t.changeDetectorRef.detectChanges()}),this._viewportRuler.change().pipe(o.takeUntil(this._onDestroy)).subscribe(function(){t.matSelect.panelOpen&&t.updateInputWidth()}),this.initMultipleHandling()},e.prototype.ngOnDestroy=function(){this._onDestroy.next(),this._onDestroy.complete()},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.setOverlayClass()}),this.matSelect.openedChange.pipe(o.take(1),o.takeUntil(this._onDestroy)).subscribe(function(){e.matSelect.options.changes.pipe(o.takeUntil(e._onDestroy)).subscribe(function(){e.changeDetectorRef.markForCheck()})})},e.prototype._handleKeydown=function(e){(e.key&&1===e.key.length||e.keyCode>=n.A&&e.keyCode<=n.Z||e.keyCode>=n.ZERO&&e.keyCode<=n.NINE||e.keyCode===n.SPACE||this.preventHomeEndKeyPropagation&&(e.keyCode===n.HOME||e.keyCode===n.END))&&e.stopPropagation()},e.prototype.writeValue=function(e){e!==this._value&&(this._value=e,this.change.emit(e))},e.prototype.onInputChange=function(e){e!==this._value&&(this.initMultiSelectedValues(),this._value=e,this.onChange(e),this.change.emit(e))},e.prototype.onBlur=function(e){this.writeValue(e),this.onTouched()},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype._focus=function(){if(this.searchSelectInput&&this.matSelect.panel){var e=this.matSelect.panel.nativeElement,t=e.scrollTop;this.searchSelectInput.nativeElement.focus(),e.scrollTop=t}},e.prototype._reset=function(e){this.searchSelectInput&&(this.searchSelectInput.nativeElement.value="",this.onInputChange(""),this.matOption&&!e&&this.matOption._getHostElement().classList.remove("mat-select-search-no-entries-found"),e&&this._focus())},e.prototype.setOverlayClass=function(){var n=this;if(!this.overlayClassSet){var a=["cdk-overlay-pane-select-search"];this.matOption||a.push("cdk-overlay-pane-select-search-with-offset"),this.matSelect.overlayDir.attach.pipe(o.takeUntil(this._onDestroy)).subscribe(function(){for(var t,e=n.searchSelectInput.nativeElement;e=e.parentElement;)if(e.classList.contains("cdk-overlay-pane")){t=e;break}t&&a.forEach(function(e){t.classList.add(e)})}),this.overlayClassSet=!0}},e.prototype.initMultipleHandling=function(){var e=this;this.matSelect.valueChange.pipe(o.takeUntil(this._onDestroy)).subscribe(function(t){if(e.matSelect.multiple){var n=!1;if(e._value&&e._value.length&&e.previousSelectedValues&&Array.isArray(e.previousSelectedValues)){t&&Array.isArray(t)||(t=[]);var a=e.matSelect.options.map(function(e){return e.value});e.previousSelectedValues.forEach(function(e){-1===t.indexOf(e)&&-1===a.indexOf(e)&&(t.push(e),n=!0)})}n&&e.matSelect._onChange(t),e.previousSelectedValues=t}})},e.prototype.adjustScrollTopToFitActiveOptionIntoView=function(){if(this.matSelect.panel&&0<this.matSelect.options.length){var e=this.getMatOptionHeight(),t=this.matSelect._keyManager.activeItemIndex||0,n=l._countGroupLabelsBeforeOption(t,this.matSelect.options,this.matSelect.optionGroups),a=(this.matOption?-1:0)+n+t,i=this.matSelect.panel.nativeElement.scrollTop,o=this.innerSelectSearch.nativeElement.offsetHeight,s=Math.floor((l.SELECT_PANEL_MAX_HEIGHT-o)/e),r=Math.round((i+o)/e)-1;a<=r?this.matSelect.panel.nativeElement.scrollTop=a*e:r+s<=a&&(this.matSelect.panel.nativeElement.scrollTop=(a+1)*e-(l.SELECT_PANEL_MAX_HEIGHT-o))}},e.prototype.updateInputWidth=function(){if(this.innerSelectSearch&&this.innerSelectSearch.nativeElement){for(var e,t=this.innerSelectSearch.nativeElement;t=t.parentElement;)if(t.classList.contains("mat-select-panel")){e=t;break}e&&(this.innerSelectSearch.nativeElement.style.width=e.clientWidth+"px")}},e.prototype.getMatOptionHeight=function(){return 0<this.matSelect.options.length?this.matSelect.options.first._getHostElement().getBoundingClientRect().height:0},e.prototype.initMultiSelectedValues=function(){this.matSelect.multiple&&!this._value&&(this.previousSelectedValues=this.matSelect.options.filter(function(e){return e.selected}).map(function(e){return e.value}))},e.prototype._noEntriesFound=function(){if(this._options)return this.matOption?this.noEntriesFoundLabel&&this.value&&1===this._options.length:this.noEntriesFoundLabel&&this.value&&0===this._options.length},e.decorators=[{type:s.Component,args:[{selector:"ngx-mat-select-search",template:'\x3c!-- Placeholder to adjust vertical offset of the mat-option elements --\x3e\n<input matInput class="mat-select-search-input mat-select-search-hidden"/>\n\n\x3c!-- Note: the  mat-datepicker-content mat-tab-header are needed to inherit the material theme colors, see PR #22 --\x3e\n<div\n      #innerSelectSearch\n      class="mat-select-search-inner mat-typography mat-datepicker-content mat-tab-header"\n      [ngClass]="{\'mat-select-search-inner-multiple\': matSelect.multiple}">\n  <input matInput\n         class="mat-select-search-input"\n         autocomplete="off"\n         [type]="type"\n         [value]="value"\n         #searchSelectInput\n         (keydown)="_handleKeydown($event)"\n         (input)="onInputChange($event.target.value)"\n         (blur)="onBlur($event.target.value)"\n         [placeholder]="placeholderLabel"\n         [attr.aria-label]="ariaLabel"\n  />\n  <mat-spinner *ngIf="searching"\n          class="mat-select-search-spinner"\n          diameter="16"></mat-spinner>\n\n  <button mat-button\n          *ngIf="value && !searching"\n          mat-icon-button\n          aria-label="Clear"\n          (click)="_reset(true)"\n          class="mat-select-search-clear">\n    <ng-content *ngIf="clearIcon; else defaultIcon" select="[ngxMatSelectSearchClear]"></ng-content>\n    <ng-template #defaultIcon>\n      <mat-icon>close</mat-icon>\n    </ng-template>\n  </button>\n</div>\n\n<div *ngIf="_noEntriesFound()"\n     class="mat-select-search-no-entries-found">\n  {{noEntriesFoundLabel}}\n</div>\n\x3c!--\nCopyright (c) 2018 Bithost GmbH All Rights Reserved.\n\nUse of this source code is governed by an MIT-style license that can be\nfound in the LICENSE file at https://angular.io/license\n--\x3e\n',providers:[{provide:t.NG_VALUE_ACCESSOR,useExisting:s.forwardRef(function(){return e}),multi:!0}],changeDetection:s.ChangeDetectionStrategy.OnPush,styles:[".mat-select-search-hidden{visibility:hidden}.mat-select-search-inner{position:absolute;top:0;width:100%;border-bottom-width:1px;border-bottom-style:solid;z-index:100;font-size:inherit;box-shadow:none;border-radius:0;-webkit-transform:translate3d(0,0,0)}.mat-select-search-inner.mat-select-search-inner-multiple{width:100%}.mat-select-search-inner .mat-input-element:-ms-input-placeholder{-ms-user-select:text}/deep/ .mat-select-search-panel{-webkit-transform:none!important;transform:none!important;overflow-x:hidden}.mat-select-search-input{padding:16px 36px 16px 16px;box-sizing:border-box}.mat-select-search-no-entries-found{padding:16px}.mat-select-search-clear{position:absolute;right:4px;top:5px}.mat-select-search-spinner{position:absolute;right:16px;top:calc(50% - 8px)}:host.mat-select-search-inside-mat-option .mat-select-search-input{padding-top:0;padding-bottom:0;height:3em;line-height:3em}:host.mat-select-search-inside-mat-option .mat-select-search-clear{top:3px}/deep/ .cdk-overlay-pane-select-search.cdk-overlay-pane-select-search-with-offset{margin-top:-50px}/deep/ .mat-option[aria-disabled=true].contains-mat-select-search{position:static;padding:0}/deep/ .mat-option[aria-disabled=true].contains-mat-select-search .mat-icon{margin-right:0}/deep/ .mat-option[aria-disabled=true].contains-mat-select-search .mat-option-pseudo-checkbox{display:none}/deep/ .mat-option[aria-disabled=true].contains-mat-select-search.mat-select-search-no-entries-found{height:6em}"]}]}],e.ctorParameters=function(){return[{type:l.MatSelect,decorators:[{type:s.Inject,args:[l.MatSelect]}]},{type:s.ChangeDetectorRef},{type:a.ViewportRuler},{type:l.MatOption,decorators:[{type:s.Optional},{type:s.Inject,args:[l.MatOption]}]}]},e.propDecorators={placeholderLabel:[{type:s.Input}],type:[{type:s.Input}],noEntriesFoundLabel:[{type:s.Input}],clearSearchInput:[{type:s.Input}],searching:[{type:s.Input}],disableInitialFocus:[{type:s.Input}],preventHomeEndKeyPropagation:[{type:s.Input}],disableScrollToActiveOnOptionsChanged:[{type:s.Input}],ariaLabel:[{type:s.Input}],searchSelectInput:[{type:s.ViewChild,args:["searchSelectInput",{read:s.ElementRef}]}],innerSelectSearch:[{type:s.ViewChild,args:["innerSelectSearch",{read:s.ElementRef}]}],clearIcon:[{type:s.ContentChild,args:[c]}],isInsideMatOption:[{type:s.HostBinding,args:["class.mat-select-search-inside-mat-option"]}]},e}(),h=function(){function e(){}return e.decorators=[{type:s.NgModule,args:[{imports:[r.CommonModule,l.MatButtonModule,l.MatIconModule,l.MatInputModule,l.MatProgressSpinnerModule],declarations:[p,c],exports:[p,c]}]}],e}();e.MatSelectSearchComponent=p,e.MatSelectSearchVersion="1.7.5",e.NgxMatSelectSearchModule=h,e.ɵa=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-mat-select-search.umd.min.js.map